{"retrieval_idx": 34, "function_tokens": ["def", "Func", "(", "arg0", ",", "**", "arg1", ")", ":", "\n", "    ", "super", "(", ")", ".", "__init__", "(", "**", "kwargs", ")"], "docstring_tokens": ["Initializes", "a", "new", "Document", "object", ".", "\n", "\n", "Args", ":", "\n", "    ", "input", "(", "UploadFile", ")", ":", "The", "uploaded", "file", "."]}
{"retrieval_idx": 53, "function_tokens": ["def", "Func", "(", "arg0", ",", "arg1", ":", "UserProperties", ",", "arg2", ":", "RedisKeyType", ",", "arg3", ",", "arg4", ":", "bool", "=", "True", ")", ":", "\n", "    ", "self", ".", "redis", ".", "set", "(", "user_properties", ".", "generate_redis_key_with_type", "(", "type", ")", ",", "json", ".", "dumps", "(", "value", ")", ")", "\n", "if", "save", ":", "\n", "        ", "return", "self", ".", "redis", ".", "save", "(", ")"], "docstring_tokens": ["Set", "the", "value", "of", "a", "key", "in", "Redis", "with", "a", "specific", "key", "type", "and", "dumps", "into", "json", "before", "setting", ".", "\n", "\n", "Args", ":", "\n", "    ", "user_properties", "(", "UserProperties", ")", ":", "The", "user", "properties", ".", "\n", "type", "(", "RedisKeyType", ")", ":", "The", "Redis", "key", "type", ".", "\n", "value", "(", "str", ")", ":", "The", "value", "to", "set", "for", "the", "key", ".", "\n", "save", "(", "bool", ",", "optional", ")", ":", "Whether", "to", "save", "the", "changes", "to", "disk", ",", "by", "default", "True", ".", "\n", "\n", "Returns", ":", "\n", "    ", "Optional", "[", "str", "]", ":", "If", " ", "`", "save", "`", "is", "True", ",", "returns", "the", "Redis", "response", "to", "the", "SAVE", "command", "."]}
{"retrieval_idx": 5, "function_tokens": ["def", "Func", "(", "arg0", ",", "arg1", ":", "list", "[", "str", "]", ")", ":", "\n", "    ", "self", ".", "focus_files", ".", "clear", "(", ")", "\n", "for", "file", "in", "focus_files", ":", "\n", "        ", "self", ".", "add_focus_file", "(", "file", ")"], "docstring_tokens": ["Set", "the", "focus", "file", "."]}
{"retrieval_idx": 41, "function_tokens": ["def", "Func", "(", "arg0", ",", "arg1", ":", "str", ",", "arg2", ":", "OldCompleteConfig", ")", "->", "OpenAIOldResp", ":", "\n", "    ", "kwargs", "=", "{", "'model'", ":", "input", ".", "model", ",", "'max_tokens'", ":", "1096", "}", "\n", "kwargs", "[", "'prompt'", "]", "=", "prompt", "\n", "if", "input", ".", "use_streaming", ":", "\n", "        ", "kwargs", "[", "'stream'", "]", "=", "True", "\n", "try", ":", "\n", "        ", "client", "=", "OpenAI", "(", "api_key", "=", "os", ".", "getenv", "(", "'OPENAI_CHAT_API_KEY'", ")", ")", "\n", "response", "=", "client", ".", "completions", ".", "create", "(", "**", "kwargs", ")", "\n", "except", "Exception", "as", "e", ":", "\n", "        ", "logging", ".", "warn", "(", "f'openai_node._make_completion: error occurred: {e}'", ")", "\n", "return", "OpenAIOldResp", "(", "text", "=", "f'Error occurred: {e}'", ",", "finish_reason", "=", "'error'", ")", "\n", "if", "input", ".", "use_streaming", ":", "\n", "        ", "resp", "=", "OpenAIOldResp", "(", "text", "=", "''", ",", "finish_reason", "=", "''", ")", "\n", "for", "completion", "in", "response", ":", "\n", "            ", "resp", ".", "text", "+=", "completion", "[", "'choices'", "]", "[", "0", "]", "[", "'text'", "]", "\n", "if", "choice", ".", "finish_reason", ":", "\n", "                ", "resp", ".", "finish_reason", "=", "completion", "[", "'choices'", "]", "[", "0", "]", "[", "'finish_reason'", "]", "\n", "break", "\n", "return", "resp", "\n", "resp", "=", "OpenAIOldResp", "(", "**", "response", ".", "choices", "[", "0", "]", ".", "model_dump", "(", ")", ")", "\n", "return", "resp"], "docstring_tokens": ["Make", "a", "completion", "with", "the", "given", "messages", "."]}
{"retrieval_idx": 7, "function_tokens": ["def", "Func", "(", "arg0", ",", "arg1", ":", "str", ",", "arg2", ":", "int", "=", "200", ")", ":", "\n", "    ", "full_path", "=", "self", ".", "root_path", "/", "file_path", "\n", "if", "os", ".", "path", ".", "exists", "(", "full_path", ")", ":", "\n", "        ", "with", "open", "(", "full_path", ",", "'r'", ")", "as", "f", ":", "\n", "            ", "lines", "=", "[", "]", "\n", "line", "=", "f", ".", "readline", "(", ")", "\n", "while", "line", ":", "\n", "                ", "lines", ".", "append", "(", "line", ")", "\n", "line", "=", "f", ".", "readline", "(", ")", "\n", "if", "len", "(", "lines", ")", ">", "limit_lines", ":", "\n", "                    ", "lines", ".", "append", "(", "'... (too many lines)'", ")", "\n", "break", "\n", "return", "'\\n'", ".", "join", "(", "lines", ")", "\n", "else", ":", "\n", "        ", "raise", "FileNotFoundError", "(", "f'File {full_path} does not exist.'", ")"], "docstring_tokens": ["Get", "the", "content", "of", "a", "file", "."]}
{"retrieval_idx": 24, "function_tokens": ["def", "Func", "(", "arg0", ",", "arg1", ":", "Plan", ")", ":", "\n", "    ", "self", ".", "plans", ".", "append", "(", "plan", ")"], "docstring_tokens": ["Add", "plan", "to", "implement", "plan", "."]}
{"retrieval_idx": 36, "function_tokens": ["def", "Func", "(", "arg0", ",", "arg1", ":", "CompleteInput", ")", ":", "\n", "    ", "return", "self", ".", "_make_completion", "(", "[", "]", ",", "input", ")"], "docstring_tokens": ["Complete", "with", "only", "current", "history", ".", "No", "extra", "messages", "."]}
{"retrieval_idx": 39, "function_tokens": ["def", "Func", "(", "arg0", ",", "arg1", ":", "ChatWithMessageInput", ")", ":", "\n", "    ", "return", "self", ".", "_make_completion", "(", "[", "input", ".", "message", "]", ",", "input", ")"], "docstring_tokens": ["Chat", "with", "OpenAI", "'", "s", "model", "with", "a", "specific", "message", "dict", "."]}
{"retrieval_idx": 57, "function_tokens": ["def", "Func", "(", "arg0", ")", ":", "\n", "    ", "st", ".", "set_page_config", "(", "page_title", "=", "'yorgassistant-web'", ",", "page_icon", "=", "'yorg.png'", ")", "\n", "col1", ",", "col2", ",", "col3", "=", "st", ".", "columns", "(", "3", ")", "\n", "with", "col2", ":", "\n", "        ", "st", ".", "image", "(", "'yorg.png'", ",", "width", "=", "200", ")", "\n", "st", ".", "header", "(", "':robot_face: :blue[Open-assistants] Web Demo '", ",", "divider", "=", "'rainbow'", ")", "\n", "with", "open", "(", "'README.md'", ",", "'r'", ")", "as", "readme_file", ":", "\n", "        ", "readme_content", "=", "readme_file", ".", "read", "(", ")", "\n", "st", ".", "markdown", "(", "readme_content", ",", "unsafe_allow_html", "=", "True", ")", "\n", "st", ".", "sidebar", ".", "title", "(", "'setup'", ")"], "docstring_tokens": ["Initialize", "Streamlit", "'", "s", "UI", "settings", "."]}
{"retrieval_idx": 21, "function_tokens": ["def", "Func", "(", "arg0", ",", "arg1", ")", ":", "\n", "    ", "self", ".", "repo_manager", ".", "remove_focus_file", "(", "file_path", ")"], "docstring_tokens": ["Remove", "file", "from", "repo", "."]}
{"retrieval_idx": 26, "function_tokens": ["def", "Func", "(", "arg0", ")", ":", "\n", "    ", "return", "self", ".", "plans"], "docstring_tokens": ["Get", "feature", "implemetation", "plan", "."]}
{"retrieval_idx": 1, "function_tokens": ["def", "Func", "(", "arg0", ")", ":", "\n", "    ", "self", ".", "openai_node", "=", "OpenAINode", "(", ")", "\n", "self", ".", "openai_node", ".", "add_single_message", "(", "Message", "(", "role", "=", "'system'", ",", "content", "=", "DA_PROMPT", ")", ")"], "docstring_tokens": ["Initialize", "OpenAI", "node", "."]}
{"retrieval_idx": 16, "function_tokens": ["def", "Func", "(", "arg0", ")", ":", "\n", "    ", "resp", "=", "self", ".", "openai_node", ".", "chat", "(", "input", "=", "ChatInput", "(", "model", "=", "self", ".", "model_name", ",", "message_text", "=", "FOCUS_FILE_PATH_PROMPT", ".", "format", "(", "format_example", "=", "FOCUS_FILE_PATH_EXAMPLE", ")", ")", ")", "\n", "files", "=", "LLMOutputParser", ".", "parse_output", "(", "resp", ".", "message", ".", "content", ")", "[", "'files'", "]", "\n", "for", "file", "in", "files", ":", "\n", "        ", "try", ":", "\n", "            ", "self", ".", "repo_manager", ".", "add_focus_file", "(", "file", ")", "\n", "except", "FileNotFoundError", ":", "\n", "            ", "logging", ".", "warning", "(", "f'File {file} does not exist.'", ")"], "docstring_tokens": ["Set", "focus", "files", "of", "agent", "for", "feature", "development", "."]}
{"retrieval_idx": 56, "function_tokens": ["def", "Func", "(", "arg0", ")", ":", "\n", "    ", "st", ".", "session_state", "[", "'assistant'", "]", "=", "[", "]", "\n", "st", ".", "session_state", "[", "'user'", "]", "=", "[", "]", "\n", "st", ".", "session_state", "[", "'selected_page_common'", "]", "=", "False", "\n", "st", ".", "session_state", "[", "'selected_create_assistant'", "]", "=", "False", "\n", "st", ".", "session_state", "[", "'selected_history'", "]", "=", "None", "\n", "st", ".", "session_state", "[", "'thread_obj'", "]", "=", "None"], "docstring_tokens": ["Clear", "the", "existing", "session", "state", "."]}
{"retrieval_idx": 29, "function_tokens": ["@", "staticmethod", "\n", "def", "Func", "(", ")", "->", "List", "[", "Dict", "[", "str", ",", "Any", "]", "]", ":", "\n", "    ", "if", "YamlPathConfig", ".", "assistants_yaml_path", ":", "\n", "        ", "if", "not", "os", ".", "path", ".", "isfile", "(", "YamlPathConfig", ".", "assistants_yaml_path", ")", ":", "\n", "            ", "with", "open", "(", "YamlPathConfig", ".", "assistants_yaml_path", ",", "'w'", ")", "as", "file", ":", "\n", "                ", "yaml", ".", "dump", "(", "[", "]", ",", "file", ")", "\n", "else", ":", "\n", "        ", "raise", "FileNotFoundError", "(", "'The threads YAML file path is not set.'", ")", "\n", "with", "open", "(", "YamlPathConfig", ".", "assistants_yaml_path", ",", "'r'", ")", "as", "file", ":", "\n", "        ", "assistants_data", "=", "yaml", ".", "safe_load", "(", "file", ")", "or", "[", "]", "\n", "assistants_list", "=", "[", "]", "\n", "for", "item", "in", "assistants_data", ":", "\n", "        ", "config", "=", "AssistantConfig", "(", "**", "item", ")", "\n", "assistants_list", ".", "append", "(", "config", ")", "\n", "return", "assistants_list"], "docstring_tokens": ["\u8bfb\u53d6", "YAML", "\u6587\u4ef6\u5e76\u8fd4\u56de\u6240\u6709", "assistants", "\u7684\u4fe1\u606f\u5217\u8868", "\u3002"]}
